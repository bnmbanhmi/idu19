<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H√†nh Tr√¨nh C·ªßa Ch√∫ng Ta ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <!-- Th∆∞ vi·ªán cho V√≤ng quay may m·∫Øn -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/TextPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/zarocknz/javascript-winwheel@master/Winwheel.min.js"></script>

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #FFF8F0; /* M√†u n·ªÅn ·∫•m √°p */
            color: #4A2E2A;
            overflow: hidden; /* ·∫®n thanh cu·ªôn ch√≠nh */
        }
        .font-dancing {
            font-family: 'Dancing Script', cursive;
        }
        .section {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
            overflow-y: auto; /* Cho ph√©p cu·ªôn trong t·ª´ng section */
            padding: 1rem;
        }
        .section.active {
            display: flex;
            opacity: 1;
        }
        /* Custom button style */
        .btn-love {
            background-image: linear-gradient(to right, #FF8989, #FFC7C7);
            color: #fff;
            font-weight: 600;
            padding: 12px 28px;
            border-radius: 999px;
            box-shadow: 0 4px 15px rgba(255, 137, 137, 0.5);
            transition: all 0.3s ease;
        }
        .btn-love:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 137, 137, 0.7);
        }
        /* Style cho timeline */
        .timeline-container::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 0;
            width: 3px;
            height: 100%;
            background-color: #FFC7C7;
        }
        .timeline-item {
            position: relative;
            width: 50%;
            padding: 20px 40px;
        }
        .timeline-item:nth-child(odd) {
            left: 0;
            padding-right: 60px;
            text-align: right;
        }
        .timeline-item:nth-child(even) {
            left: 50%;
            padding-left: 60px;
            text-align: left;
        }
        .timeline-item::after {
            content: '';
            position: absolute;
            top: 30px;
            width: 25px;
            height: 25px;
            background-color: #FFF8F0;
            border: 4px solid #FF8989;
            border-radius: 50%;
            z-index: 1;
        }
        .timeline-item:nth-child(odd)::after {
            right: -12.5px;
        }
        .timeline-item:nth-child(even)::after {
            left: -12.5px;
        }

        /* Style cho th·∫ª c√†o */
        #scratch-card-container {
            position: relative;
            width: 400px;
            height: 300px;
            cursor: grabbing;
        }
        #scratch-canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        #hidden-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 1rem;
        }
    </style>
</head>
<body class="flex items-center justify-center h-screen">

    <!-- Section 1: Welcome -->
    <section id="welcome" class="section active flex-col items-center justify-center text-center bg-cover bg-center" style="background-image: url('images/VideoCapture_20241101-095405.jpg');">
        <div class="bg-white/70 backdrop-blur-sm p-8 rounded-2xl shadow-lg">
            <h1 class="font-dancing text-5xl md:text-7xl text-pink-500">D√†nh t·∫∑ng ng·ª´i anh iuuuu</h1>
            <p class="mt-4 text-lg md:text-xl">Ch√∫c m·ª´ng sinh nh·∫≠t em b√© 19 tu·ªïi nh√°aaa</p>
            <p class="mt-4 text-lg md:text-xl">V√† k·ª∑ ni·ªám 1 nƒÉm ch√∫ng m√¨nh nh√¨n th·∫•y nhaooo</p>
            <p class="mt-2 text-md md:text-lg">Anh c√≥ m√≥n qu√† nho nh·ªè n√†y. Em s·∫µn s√†ng kh√°m ph√° ch·ª©?</p>
            <button onclick="showSection('timeline')" class="btn-love mt-8">B·∫Øt ƒê·∫ßu H√†nh Tr√¨nh</button>
        </div>
    </section>

    <!-- Section 2: Timeline -->
    <section id="timeline" class="section flex-col items-center justify-start">
        <div class="w-full max-w-4xl mx-auto p-4 md:p-10">
            <h2 class="font-dancing text-4xl md:text-6xl text-center mb-12">D√≤ng Th·ªùi Gian K√Ω ·ª®c</h2>
            <div class="timeline-container relative">
                <!-- THAY TH·∫æ C√ÅC M·ª§C D∆Ø·ªöI ƒê√ÇY B·∫∞NG K·ª∂ NI·ªÜM C·ª¶A B·∫†N -->
                <div class="timeline-item">
                    <img src="https://placehold.co/300x300/FFC7C7/4A2E2A?text=Hog+c√≥+·∫£nh" alt="K·ª∑ ni·ªám 1" class="rounded-lg shadow-md inline-block">
                    <div class="mt-2">
                        <h3 class="font-bold text-lg">Ng√†y 30/09/2024</h3>
                        <p>Ng√†y anh nh·∫≠n ra h√¨nh b√≥ng anh h·∫±ng m∆° l√† c√≥ th·∫≠t. Em m·∫∑c m·ªôt chi·∫øc v√°y m√†u... ƒëen, t·∫•t nhi√™n √πi. V√† ƒë√¢y l√† kh·ªüi ƒë·∫ßu cho m·ªôt h√†nh tr√¨nh gian kh·ªï (nh∆∞ng vui)...</p>
                    </div>
                </div>
                <div class="timeline-item">
                     <img src="https://placehold.co/300x300/FFC7C7/4A2E2A?text=C≈©ng+hog+c√≥+·∫£nh,++ti·∫øc+gh√™..." alt="K·ª∑ ni·ªám 2" class="rounded-lg shadow-md inline-block">
                    <div class="mt-2">
                        <h3 class="font-bold text-lg">Ng√†y 06/10/2024</h3>
                        <p>First date, ch√∫ng m√¨nh ƒëi V·ª• Xu√¢n, anh v·∫´n nh·ªõ ƒë∆∞·ª£c em b√© l√†m tiramisu cho ƒÉn, h·∫π h·∫π h·∫π. Anh b·∫Øt ƒë·∫ßu nh·ªØng ng√†y th√°ng gi·∫£ng v·ªÅ AI cho em b√© nghe... Xong ƒë∆∞·ª£c c√πng nhau tr·∫£i nghi·ªám 1 chuy·∫øn l·∫°c ƒë∆∞·ªùng v√≤ng quanh H√† N·ªôi...</p>
                    </div>
                </div>
                <div class="timeline-item">
                     <img src="images/Screenshot 2024-11-09 at 01.18.23.jpg" alt="K·ª∑ ni·ªám 3" class="rounded-lg shadow-md inline-block">
                    <div class="mt-2">
                        <h3 class="font-bold text-lg">Ng√†y 29/01/2025</h3>
                        <p>M·ªôt ƒë√™m m√† 2 ƒë·ª©a h√¢m n√≥i chuy·ªán v·ªõi nhau ƒë·∫øn t·∫≠n 7h s√°ng...</p>
                    </div>
                </div>
                <div class="timeline-item">
                     <img src="images/IMG_1737970864112_1738088204660.jpg" alt="K·ª∑ ni·ªám 4" class="rounded-lg shadow-md inline-block">
                    <div class="mt-2">
                        <h3 class="font-bold text-lg">Ng√†y 29/01/2025</h3>
                        <p>M·ªôt ng√†y ƒë·∫πp tr·ªùi, anh ƒë·∫øn ch∆°i v·ªõi em b√© c·ª•a anhhhh</p>
                    </div>
                </div>
                <div class="timeline-item">
                     <img src="images/IMG_20250413_102931.jpg" alt="K·ª∑ ni·ªám 5" class="rounded-lg shadow-md inline-block">
                    <div class="mt-2">
                        <h3 class="font-bold text-lg">Ng√†y 13/04/2025</h3>
                        <p>Sau th√†nh c√¥ng ƒë·∫ßu ti√™n c√πng nhau, ch·∫Øc ch·∫Øn s·∫Ω l√† kh·ªüi ƒë·∫ßu cho r·∫•t nhi·ªÅu th√†nh c√¥ng n·ªØa</p>
                    </div>
                </div>
                <div class="timeline-item">
                     <img src="images/IMG_1749653374608_1749653662193.jpg" alt="K·ª∑ ni·ªám 6" class="rounded-lg shadow-md inline-block">
                    <div class="mt-2">
                        <h3 class="font-bold text-lg">Ng√†y 11/06/2025</h3>
                        <p>Tr∆∞·ªõc th√†nh c√¥ng ti·∫øp theo c√πng nhau, b·∫£o r·ªìi m√†, s·∫Ω c√≤n nhi·ªÅu n·ªØa, c·ª© ƒë·ª£i ƒë√≥ooo</p>
                    </div>
                </div>
                <div class="timeline-item">
                     <img src="images/IMG_1756557520312_1756557542102.jpg" alt="K·ª∑ ni·ªám 6" class="rounded-lg shadow-md inline-block">
                    <div class="mt-2">
                        <h3 class="font-bold text-lg">Ng√†y 30/08/2025</h3>
                        <p>Ch·∫£ d·ªãp g√¨ nh∆∞ng th√≠ch th√¨ cho v√†o</p>
                    </div>
                </div>
                <!-- K·∫æT TH√öC PH·∫¶N THAY TH·∫æ -->
            </div>
             <div class="text-center mt-12">
                <button onclick="showSection('stats')" class="btn-love">Kh√°m ph√° ƒëi·ªÅu th√∫ v·ªã v·ªÅ t·ª•i m√¨nh</button>
            </div>
        </div>
    </section>

    <!-- Section 3: Stats & Quiz -->
    <section id="stats" class="section flex-col items-center justify-center text-center">
        <div class="w-full max-w-4xl mx-auto">
            <h2 class="font-dancing text-4xl md:text-6xl mb-8">Nh·ªØng Con S·ªë Kh√¥ng Bi·∫øt N√≥i G√¨</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8 mb-12 text-center">
                <!-- THAY TH·∫æ C√ÅC CON S·ªê -->
                <div class="bg-white/60 p-4 rounded-xl shadow-md">
                    <div class="text-4xl">‚òï</div>
                    <p class="text-3xl font-bold">9</p>
                    <p>L·∫ßn t·ªõi qu√°n 2 qu√°n cafe y√™u th√≠ch nh·∫•t, ƒë·ªë bic l√† qu√°n n√†o</p>
                </div>
                <div class="bg-white/60 p-4 rounded-xl shadow-md">
                    <div class="text-4xl">üçú</div>
                    <p class="text-3xl font-bold">100</p>
                    <p>Bu·ªïi ƒëi ƒÉn ngon</p>
                </div>
                <div class="bg-white/60 p-4 rounded-xl shadow-md">
                    <div class="text-4xl">‚úàÔ∏è</div>
                    <p class="text-3xl font-bold">999</p>
                    <p>S·ªë l·∫ßn em b√© ch·ªâ ƒë∆∞·ªùng sai</p>
                </div>
                <div class="bg-white/60 p-4 rounded-xl shadow-md">
                    <div class="text-4xl">üé¨</div>
                    <p class="text-3xl font-bold">2</p>
                    <p>B·ªô phim xem c√πng nhau (ƒë√°ng ra l√† nhi·ªÅu h∆°n nh∆∞ng m√¨nh c·ª© l√†m g√¨ √≠...</p>
                </div>
                <div class="bg-white/60 p-4 rounded-xl shadow-md">
                    <div class="text-4xl">‚ù§Ô∏è</div>
                    <p class="text-3xl font-bold">‚àû</p>
                    <p>T√¨nh y√™u anh d√†nh cho em</p>
                </div>
            </div>
            
            <div id="quiz-container" class="bg-white/80 p-6 rounded-2xl shadow-lg">
                <!-- C√°c c√¢u h·ªèi s·∫Ω ƒë∆∞·ª£c load v√†o ƒë√¢y b·∫±ng JS -->
            </div>
        </div>
    </section>

     <!-- Section 4: Scratch Card -->
    <section id="scratch" class="section flex-col items-center justify-center text-center">
        <h2 class="font-dancing text-4xl md:text-6xl mb-4">Anh c√≥ m·ªôt m√≥n qu√† b√≠ m·∫≠t...</h2>
        <p class="mb-8">C√†o ƒë·ªÉ nh·∫≠n m·ªôt b·ª©c ·∫£nh c√¥ b√© xinh ƒë·∫πp nh·∫•t th·∫ø gi·ªõi nh√©!</p>
        <div id="scratch-card-container" class="rounded-2xl shadow-2xl">
            <!-- THAY ·∫¢NH "D√åM" C·ª¶A IDU V√ÄO ƒê√ÇY -->
            <img id="hidden-image" src="images/IMG_20250415_161417.jpg" alt="Hidden treasure">
            <canvas id="scratch-canvas" width="400" height="300"></canvas>
        </div>
        <button id="scratch-next-btn" onclick="showSection('wheel')" class="btn-love mt-8 opacity-0 transition-opacity duration-500">V√† ƒë√¢y m·ªõi l√† m√≥n qu√† th·∫≠t s·ª±!</button>
    </section>
    
    <!-- Section 5: Wheel of Fortune -->
    <section id="wheel" class="section flex-col items-center justify-center text-center">
        <h2 class="font-dancing text-4xl md:text-6xl mb-4">V√≤ng Quay Coupon T√¨nh Y√™u</h2>
        <p class="mb-8">Quay ƒë·ªÉ xem cu·ªôc h·∫πn ti·∫øp theo c·ªßa ch√∫ng m√¨nh l√† g√¨iiii</p>
        <div class="relative w-80 h-80 md:w-96 md:h-96 flex items-center justify-center">
            <canvas id="coupon-wheel" width="500" height="500"></canvas>
            <div class="absolute w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-inner cursor-pointer" onclick="startSpin()">
                <span class="font-bold text-pink-500">QUAY</span>
            </div>
            <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 text-4xl">üîª</div>
        </div>
        <div id="wheel-result" class="mt-8 text-2xl font-bold h-10"></div>
        <button id="wheel-next-btn" onclick="showSection('final')" class="btn-love mt-4 opacity-0 transition-opacity duration-500">Xem l·ªùi nh·∫Øn cu·ªëi c√πng</button>
    </section>

    <!-- Section 6: Final Message -->
    <section id="final" class="section flex-col items-center justify-center text-center bg-cover bg-center" style="background-image: url('images/IMG_20250325_214438.jpg');">
        <div class="bg-white/70 backdrop-blur-sm p-8 rounded-2xl shadow-lg max-w-2xl">
            <h1 class="font-dancing text-5xl md:text-7xl text-pink-500">Y√™u Em</h1>
            <!-- THAY L·ªúI NH·∫ÆN C·ª¶A B·∫†N V√ÄO ƒê√ÇY -->
            <p class="mt-4 text-lg md:text-xl">C·∫£m ∆°n em v√¨ ƒë√£ sinh ra tr√™n ƒë·ªùi n√†y 19 nƒÉm tr∆∞·ªõc ƒë√¢y v√† l√†m cho m·ªôt nƒÉm qua c·ªßa anh c√≥ √Ω nghƒ©a h∆°n bao gi·ªù h·∫øt. Y√™u em nhi·ªÅu l·∫Ømmmmm em bi·∫øt hogggg, y√™u b·∫±ng c·∫£ tr√°i tim ƒë√≥oo.</p>
            <p class="mt-8 text-xl font-semibold">- Ng·ª´i iu em -</p>
        </div>
    </section>


    <script>
        // --- Navigation Logic ---
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            setTimeout(() => {
                const newSection = document.getElementById(sectionId);
                if (newSection) {
                    newSection.classList.add('active');
                    // Initialize section-specific logic
                    if(sectionId === 'scratch') initScratchCard();
                    // We no longer initialize the wheel here. It will be initialized on first spin.
                    if(sectionId === 'stats') startQuiz();
                }
            }, 400); // ƒê·ª£i 0.4s ƒë·ªÉ hi·ªáu ·ª©ng m·ªù c≈© ho√†n t·∫•t
        }

        // --- Quiz Logic ---
        const quizData = [
            {
                question: "Ai l√† ng∆∞·ªùi ƒë√°ng iu nh·∫•t th·∫ø gi·ªõi?",
                options: [
                    { text: "M·ªôt ch√∫ c√∫n con", image: "https://bizweb.dktcdn.net/100/327/092/files/1-223c55b9-fdc8-4444-b517-1252df9caef5.png?v=1678681925834" },
                    { text: "idu", image: "images/IMG_20250415_161415.jpg", correct: true }
                ]
            },
            {
                question: "Ai l√† ng∆∞·ªùi xinh ƒë·∫πp nh·∫•t th·∫ø gian?",
                options: [
                    { text: "Hoa h·∫≠u Th·∫ø gi·ªõi", image: "https://photo.znews.vn/w660/Uploaded/bpivpjbp/2018_03_10/28959155_1366003913545138_9045654308850237440_o.jpg" },
                    { text: "idu", image: "images/IMG_20250427_231412.jpg", correct: true }
                ]
            },
            {
                question: "Ai l√† ng∆∞·ªùi th√¥ng minh nh·∫•t qu·∫£ ƒë·∫•t?",
                options: [
                    { text: "bnm", image: "images/20250425_204619.jpg" },
                    { text: "idu", image: "images/IMG_1749653374650_1749653664511.jpg", correct: true }
                ]
            },
            {
                question: "Ai l√† ng∆∞·ªùi anh y√™u nh·∫•t tr√™n ƒë·ªùi?",
                options: [
                    { text: "idu bu·ªìn", image: "images/IMG_8075.jpg", correct: true },
                    { text: "idu vui", image: "images/Messenger_creation_DF1E1146-1C28-443A-B849-DE474B914D52.jpeg", correct: true }
                ]
            }
        ];
        let currentQuestionIndex = 0;

        function startQuiz() {
            currentQuestionIndex = 0;
            displayQuestion();
        }

        function displayQuestion() {
            const quizContainer = document.getElementById('quiz-container');
            if (currentQuestionIndex < quizData.length) {
                const questionData = quizData[currentQuestionIndex];
                let optionsHtml = questionData.options.map((opt, index) => `
                    <button onclick="checkAnswer(${opt.correct || false}, this)" class="w-1/2 p-2 transform hover:scale-105 transition-transform">
                        <img src="${opt.image}" alt="${opt.text}" class="rounded-lg shadow-md w-full object-cover aspect-square">
                        <p class="mt-2 font-semibold">${opt.text}</p>
                    </button>
                `).join('');

                quizContainer.innerHTML = `
                    <h3 class="text-2xl font-semibold mb-4">${questionData.question}</h3>
                    <div class="flex">${optionsHtml}</div>
                `;
            } else {
                quizContainer.innerHTML = `
                    <h3 class="text-2xl font-semibold mb-4">U·∫ßy, tr·∫£ l·ªùi ƒë√∫ng h·∫øt lun! Qu√° gi·ªèi! ƒê√∫ng l√† ng∆∞·ªùi v·ª´a ƒë√°ng iu v·ª´a xinh ƒë·∫πp v·ª´a th√¥ng minh v·ª´a anh iu nh·∫•t tr√™n ƒë·ªùi!</h3>
                    <button onclick="showSection('scratch')" class="btn-love">Ti·∫øp t·ª•c kh√°m ph√° n√†o!</button>
                `;
            }
        }
        
        function checkAnswer(isCorrect, element) {
            const buttons = element.parentElement.querySelectorAll('button');
            const resultDiv = document.createElement('div');
            resultDiv.className = 'mt-4 text-xl font-bold';
            
            if (isCorrect) {
                element.style.border = '4px solid #4ade80';
                resultDiv.textContent = 'waoooo, qu√° chu·∫©nnnn';
                resultDiv.style.color = '#16a34a';
                buttons.forEach(btn => btn.disabled = true);
                element.parentElement.parentElement.appendChild(resultDiv);
                setTimeout(() => {
                    currentQuestionIndex++;
                    displayQuestion();
                }, 1500);
            } else {
                element.style.border = '4px solid #f87171';
                resultDiv.textContent = '√©ccccc, sai b√©tttt';
                resultDiv.style.color = '#dc2626';
                element.parentElement.parentElement.appendChild(resultDiv);
                gsap.fromTo(element, {x:-5}, {x:5, clearProps:"x", repeat:5, duration:0.08});
                setTimeout(() => {
                    element.style.border = 'none';
                    resultDiv.remove();
                }, 1500);
            }
        }

        // --- Scratch Card Logic ---
        function initScratchCard() {
            const canvas = document.getElementById('scratch-canvas');
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            
            ctx.fillStyle = '#C0C0C0'; // M√†u b·∫°c
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.globalCompositeOperation = 'destination-out';

            function getMousePos(canvas, evt) {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: evt.clientX - rect.left,
                    y: evt.clientY - rect.top
                };
            }

            function scratch(x, y) {
                ctx.beginPath();
                ctx.arc(x, y, 20, 0, Math.PI * 2);
                ctx.fill();
            }
            
            let scratchedPixels = 0;
            let totalPixels = canvas.width * canvas.height;

            function checkScratchProgress() {
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                let transparentPixels = 0;
                for (let i = 3; i < imageData.data.length; i += 4) {
                    if (imageData.data[i] === 0) {
                        transparentPixels++;
                    }
                }
                const percentage = (transparentPixels / totalPixels) * 100;
                if (percentage > 60) {
                    document.getElementById('scratch-next-btn').style.opacity = '1';
                }
            }

            canvas.addEventListener('mousedown', () => isDrawing = true);
            canvas.addEventListener('mouseup', () => {
                isDrawing = false;
                checkScratchProgress();
            });
            canvas.addEventListener('mousemove', (e) => {
                if (!isDrawing) return;
                const pos = getMousePos(canvas, e);
                scratch(pos.x, pos.y);
            });
            // For touch devices
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                isDrawing = true;
            });
            canvas.addEventListener('touchend', (e) => {
                e.preventDefault();
                isDrawing = false;
                checkScratchProgress();
            });
            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                if (!isDrawing) return;
                const touch = e.touches[0];
                const pos = getMousePos(canvas, touch);
                scratch(pos.x, pos.y);
            });
        }
        
        // --- Wheel of Fortune Logic ---
        let theWheel;

        function initWheel() {
             // A check to make sure the library has loaded
            if (typeof Winwheel === 'undefined') {
                console.error('Winwheel library not loaded.');
                alert('ƒê√£ c√≥ l·ªói x·∫£y ra v·ªõi v√≤ng quay, vui l√≤ng th·ª≠ l·∫°i sau!');
                return;
            }

             theWheel = new Winwheel({
                'canvasId'     : 'coupon-wheel', // Critical: specify which canvas to use
                'numSegments'  : 8,
                'outerRadius'  : 240,
                'textFontSize' : 16,
                'textFontFamily' : 'Montserrat',
                'segments'     :
                [
                   {'fillStyle' : '#FF8989', 'text' : 'Massage 30 ph√∫t'},
                   {'fillStyle' : '#FFC7C7', 'text' : 'ƒê·∫•m l∆∞ng x·∫£ stress'},
                   {'fillStyle' : '#FFEADD', 'text' : 'M·ªôt b·ªØa c∆°m anh n·∫•u'},
                   {'fillStyle' : '#FF8989', 'text' : 'V√© xem phim em ch·ªçn'},
                   {'fillStyle' : '#FFC7C7', 'text' : 'Shopping'},
                   {'fillStyle' : '#FF8989', 'text' : 'Tr√† s·ªØa/N∆∞·ªõc cam'},
                   {'fillStyle' : '#FFC7C7', 'text' : 'ƒêi ph·ªë ƒëi b·ªô'}
                ],
                'animation' :
                {
                    'type'     : 'spinToStop',
                    'duration' : 8,
                    'spins'    : 10,
                    'callbackFinished' : alertPrize,
                    'callbackSound'    : playSound,
                    'soundTrigger'     : 'pin'
                },
                'pins' : {
                    'number' : 16
                }
            });
        }
        
        let audio = new Audio('https://cdn.jsdelivr.net/gh/crismc/winwheel_js/examples/media/tick.mp3');
        function playSound() {
            audio.pause();
            audio.currentTime = 0;
            audio.play();
        }

        function startSpin() {
            // Initialize the wheel on the first spin attempt, if it hasn't been already.
            if (!theWheel) {
                initWheel();
            }

            // It might fail to initialize if the library is missing, so check again.
            if (theWheel) {
                theWheel.stopAnimation(false);
                theWheel.rotationAngle = 0;
                theWheel.startAnimation();
                document.getElementById('wheel-result').innerText = "";
            } else {
                // Fallback if library fails to load
                console.error('Winwheel library failed to initialize');
                const prizes = [
                    'Massage 30 ph√∫t',
                    'ƒê·∫•m l∆∞ng x·∫£ stress',
                    'M·ªôt b·ªØa c∆°m anh n·∫•u',
                    'V√© xem phim em ch·ªçn',
                    'Shopping',
                    'Tr√† s·ªØa/N∆∞·ªõc cam',
                    'ƒêi ph·ªë ƒëi b·ªô'
                ];
                const randomPrize = prizes[Math.floor(Math.random() * prizes.length)];
                setTimeout(() => {
                    alertPrize({text: randomPrize});
                }, 2000);
            }
        }
        
        function alertPrize(indicatedSegment) {
            const resultDiv = document.getElementById('wheel-result');
            resultDiv.innerText = `Ch√∫c m·ª´ng! Em nh·∫≠n ƒë∆∞·ª£c: "${indicatedSegment.text}"`;
            document.getElementById('wheel-next-btn').style.opacity = '1';
        }

    </script>
</body>
</html>

